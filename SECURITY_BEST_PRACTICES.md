# –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –¥–µ–ø–ª–æ—è - –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

## üîê SSH –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### ‚úÖ –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- **SSH –∫–ª—é—á–∏ –î–û–õ–ñ–ù–´ –±—ã—Ç—å –∑–∞—â–∏—â–µ–Ω—ã –ø–∞—Ä–æ–ª–µ–º (passphrase)**
- **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã**: `ed25519` –∏–ª–∏ `rsa` (–º–∏–Ω–∏–º—É–º 4096 –±–∏—Ç)
- **–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–ª—é—á–∏ –±–µ–∑ –ø–∞—Ä–æ–ª—è** –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω —Å–µ—Ä–≤–µ—Ä–æ–≤

### üîë –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ SSH –∫–ª—é—á–∞:
```bash
# –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Å–ø–æ—Å–æ–± - ed25519 —Å –ø–∞—Ä–æ–ª–µ–º
ssh-keygen -t ed25519 -C "github-actions-deploy-$(date +%Y%m%d)"

# –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± - RSA 4096 –±–∏—Ç
ssh-keygen -t rsa -b 4096 -C "github-actions-deploy-$(date +%Y%m%d)"

# –í–ê–ñ–ù–û: –ü—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ passphrase –≤–≤–µ–¥–∏—Ç–µ –ù–ê–î–ï–ñ–ù–´–ô –ø–∞—Ä–æ–ª—å!
# –ú–∏–Ω–∏–º—É–º 12 —Å–∏–º–≤–æ–ª–æ–≤, –≤–∫–ª—é—á–∞—è –±—É–∫–≤—ã, —Ü–∏—Ñ—Ä—ã –∏ —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª—ã
```

### üõ°Ô∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞:
```bash
# –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
chmod 700 ~/.ssh
chmod 600 ~/.ssh/authorized_keys
chmod 600 ~/.ssh/id_*

# –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –≤—Ö–æ–¥–∞ –ø–æ –ø–∞—Ä–æ–ª—é (—Ç–æ–ª—å–∫–æ –∫–ª—é—á–∏)
sudo sed -i 's/#PasswordAuthentication yes/PasswordAuthentication no/' /etc/ssh/sshd_config
sudo sed -i 's/PasswordAuthentication yes/PasswordAuthentication no/' /etc/ssh/sshd_config
sudo systemctl restart sshd
```

## üîí Django –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### SECRET_KEY
```python
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–∞–¥–µ–∂–Ω–æ–≥–æ SECRET_KEY
import secrets
secret_key = secrets.token_urlsafe(50)
print(f"SECRET_KEY={secret_key}")
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- **–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ —Å–µ–∫—Ä–µ—Ç—ã –≤ Git**
- **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ GitHub Secrets** –¥–ª—è –≤—Å–µ—Ö —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **–†–µ–≥—É–ª—è—Ä–Ω–æ —Ä–æ—Ç–∏—Ä—É–π—Ç–µ –∫–ª—é—á–∏** (–∫–∞–∂–¥—ã–µ 3-6 –º–µ—Å—è—Ü–µ–≤)

## üö´ –ß—Ç–æ –ù–ï –¥–µ–ª–∞—Ç—å

### ‚ùå –ù–µ–±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏:
- SSH –∫–ª—é—á–∏ –±–µ–∑ passphrase
- –•—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–æ–≤ –≤ –∫–æ–¥–µ
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–ª–∞–±—ã—Ö –ø–∞—Ä–æ–ª–µ–π
- –û—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ—Ä—Ç—ã –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤ –æ—Ç root –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### ‚ùå –ù–µ–±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:
```bash
# –ù–ï –î–ï–õ–ê–ô–¢–ï –¢–ê–ö:
ssh-keygen -t rsa -N ""  # –ö–ª—é—á –±–µ–∑ –ø–∞—Ä–æ–ª—è
chmod 777 ~/.ssh         # –°–ª–∏—à–∫–æ–º –æ—Ç–∫—Ä—ã—Ç—ã–µ –ø—Ä–∞–≤–∞
```

## ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### GitHub Secrets (–≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã):
```
DO_HOST=your-server-ip
DO_USERNAME=root
DO_SSH_KEY=-----BEGIN OPENSSH PRIVATE KEY-----...
DO_SSH_PASSPHRASE=your-strong-passphrase
DO_PORT=22
SECRET_KEY=your-50-char-secret-key
ALLOWED_HOSTS=your-domain.com,your-server-ip
TELEGRAM_BOT_TOKEN=your-bot-token
```

### –§–∞–π—Ä–≤–æ–ª —Å–µ—Ä–≤–µ—Ä–∞:
```bash
# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ UFW (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
sudo ufw default deny incoming
sudo ufw default allow outgoing
sudo ufw allow 22/tcp    # SSH
sudo ufw allow 8000/tcp  # –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
sudo ufw --force enable
```

## üîÑ –†–µ–≥—É–ª—è—Ä–Ω–æ–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ

### –ö–∞–∂–¥—ã–µ 3 –º–µ—Å—è—Ü–∞:
- [ ] –†–æ—Ç–∞—Ü–∏—è SSH –∫–ª—é—á–µ–π
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ SECRET_KEY
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã —Å–µ—Ä–≤–µ—Ä–∞

### –ö–∞–∂–¥—ã–π –º–µ—Å—è—Ü:
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö SSH —Å–µ—Å—Å–∏–π
- [ ] –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤ –¥–æ—Å—Ç—É–ø–∞
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

## üö® –†–µ–∞–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –∏–Ω—Ü–∏–¥–µ–Ω—Ç—ã

### –ü—Ä–∏ –∫–æ–º–ø—Ä–æ–º–µ—Ç–∞—Ü–∏–∏ SSH –∫–ª—é—á–∞:
1. **–ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ** —É–¥–∞–ª–∏—Ç–µ –∫–ª—é—á —Å —Å–µ—Ä–≤–µ—Ä–∞
2. –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –Ω–æ–≤—ã–π –∫–ª—é—á —Å –Ω–æ–≤—ã–º –ø–∞—Ä–æ–ª–µ–º
3. –û–±–Ω–æ–≤–∏—Ç–µ GitHub Secrets
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å

### –ü—Ä–∏ –∫–æ–º–ø—Ä–æ–º–µ—Ç–∞—Ü–∏–∏ SECRET_KEY:
1. –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –Ω–æ–≤—ã–π SECRET_KEY
2. –û–±–Ω–æ–≤–∏—Ç–µ GitHub Secret
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ—Å—Å–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è:
- SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è: `/var/log/auth.log`
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: `fsp/logs/app.log`
- –°–∏—Å—Ç–µ–º–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è: `/var/log/syslog`

### –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:
```bash
# –ê–∫—Ç–∏–≤–Ω—ã–µ SSH —Å–µ—Å—Å–∏–∏
who

# –ü–æ—Å–ª–µ–¥–Ω–∏–µ –≤—Ö–æ–¥—ã
last

# –ù–µ—É–¥–∞—á–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –≤—Ö–æ–¥–∞
sudo grep "Failed password" /var/log/auth.log
```

---

**–ü–æ–º–Ω–∏—Ç–µ**: –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å - —ç—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å, –∞ –Ω–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ. –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ –∏ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Å–≤–æ–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏! üõ°Ô∏è