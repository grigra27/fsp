# Настройка GitHub Secrets для деплоя

## Необходимые секреты

Перейдите в настройки вашего GitHub репозитория: `Settings` → `Secrets and variables` → `Actions` и добавьте следующие секреты:

### 1. DO_HOST
- **Описание**: IP адрес вашего DigitalOcean сервера
- **Пример**: `164.90.XXX.XXX`

### 2. DO_USERNAME
- **Описание**: Имя пользователя для SSH подключения
- **Значение**: `root` (или другой пользователь с sudo правами)

### 3. DO_SSH_KEY
- **Описание**: Приватный SSH ключ для подключения к серверу
- **Формат**: Полный приватный ключ, включая заголовки
- **Пример**:
```
-----BEGIN OPENSSH PRIVATE KEY-----
b3BlbnNzaC1rZXktdjEAAAAACmFlczI1Ni1jdHIAAAAGYmNyeXB0AAAA...
...
-----END OPENSSH PRIVATE KEY-----
```

### 4. DO_SSH_PASSPHRASE
- **Описание**: Пароль для SSH ключа (если ключ защищен паролем)
- **Значение**: Ваш passphrase для SSH ключа
- **Примечание**: Если ваш SSH ключ не защищен паролем, оставьте это поле пустым

### 5. DO_PORT
- **Описание**: SSH порт сервера
- **Значение**: `22` (стандартный SSH порт)

### 6. SECRET_KEY
- **Описание**: Django SECRET_KEY для продакшена
- **Генерация**: Используйте длинную случайную строку
- **Пример генерации**:
```python
import secrets
print(secrets.token_urlsafe(50))
```

### 7. ALLOWED_HOSTS
- **Описание**: Разрешенные хосты для Django
- **Формат**: Список хостов через запятую
- **Пример**: `your-domain.com,164.90.XXX.XXX,localhost`

### 8. TELEGRAM_BOT_TOKEN
- **Описание**: Токен вашего Telegram бота
- **Получение**: От @BotFather в Telegram
- **Формат**: `1234567890:ABCdefGHIjklMNOpqrsTUVwxyz`

## Проверка настроек

После добавления всех секретов:

1. Убедитесь, что все 8 секретов добавлены
2. Проверьте, что SSH ключ соответствует публичному ключу на сервере
3. Если используете passphrase, убедитесь, что он правильный

## Тестирование деплоя

После настройки секретов сделайте commit и push:

```bash
git add .
git commit -m "Fix SSH authentication and CSS map issues"
git push origin main
```

GitHub Actions автоматически запустит деплой с новыми настройками.

## Устранение проблем

### SSH ключ не работает
- Убедитесь, что приватный ключ скопирован полностью
- Проверьте, что публичный ключ добавлен в `~/.ssh/authorized_keys` на сервере
- Убедитесь, что права на файлы SSH настроены правильно:
  ```bash
  chmod 700 ~/.ssh
  chmod 600 ~/.ssh/authorized_keys
  ```

### Passphrase ошибка
- Если ваш SSH ключ не защищен паролем, оставьте `DO_SSH_PASSPHRASE` пустым
- Если защищен, убедитесь, что passphrase введен правильно

### Проблемы с подключением
- Проверьте, что сервер доступен по SSH: `ssh root@your-server-ip`
- Убедитесь, что порт 22 открыт в файрволе сервера